plugins {
    id "org.springframework.boot"
    id "io.spring.dependency-management"
}

bootJar { enabled = false }
jar { enabled = true }

test {
    useJUnitPlatform {
        excludeTags "oom"
    }
}

tasks.register("oomTest", Test) {
    group = "verification"
    description = "Run only tests tagged with 'oom' (heap pressure / OOM repro)."

    useJUnitPlatform {
        includeTags "oom"
    }
    jvmArgs "-Xmx256m"
}

dependencies {
    implementation "com.querydsl:querydsl-jpa:5.1.0:jakarta"
    annotationProcessor "com.querydsl:querydsl-apt:5.1.0:jakarta"
    annotationProcessor "jakarta.persistence:jakarta.persistence-api"
    // annotationProcessor "jakarta.annotation:jakarta.annotation-api"
}